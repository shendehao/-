# 📖 库存管理系统 - 完整使用指南

## 🎯 项目状态

### ✅ 已完成
1. **项目架构** - Django + DRF完整配置
2. **用户认证** - JWT登录/注册/权限管理
3. **数据模型** - 所有核心模型已实现
   - ✅ 用户模型（User）
   - ✅ 供应商模型（Supplier）
   - ✅ 仓库模型（Warehouse）
   - ✅ 类别模型（Category）
   - ✅ 物品模型（Item）
   - ✅ 操作记录模型（InventoryOperation）
4. **前端界面** - 完整的HTML模板
5. **部署配置** - Docker + Nginx
6. **测试数据** - 自动生成脚本

### ⚠️ 待完成
- API接口实现（序列化器和视图）
- 前后端数据对接
- 仪表盘统计功能
- 报表导出功能

---

## 🚀 快速启动（3分钟）

### 方式一：一键启动（推荐）

```bash
# 双击运行
start.bat
```

这个脚本会自动完成：
1. 创建虚拟环境
2. 安装所有依赖
3. 初始化项目结构
4. 创建环境配置
5. 执行数据库迁移
6. 生成测试数据
7. 启动开发服务器

### 方式二：手动启动

```bash
# 1. 创建并激活虚拟环境
python -m venv venv
venv\Scripts\activate

# 2. 安装依赖
pip install -r requirements.txt

# 3. 初始化项目
python init_project.py

# 4. 数据库迁移
python manage.py makemigrations
python manage.py migrate

# 5. 生成测试数据
python setup_database.py

# 6. 启动服务器
python manage.py runserver
```

---

## 🌐 访问系统

启动成功后访问：

| 功能 | URL | 说明 |
|------|-----|------|
| **前端界面** | http://localhost:8000/ | 库存管理主界面 |
| **API文档** | http://localhost:8000/swagger/ | Swagger交互式文档 |
| **ReDoc文档** | http://localhost:8000/redoc/ | ReDoc API文档 |
| **管理后台** | http://localhost:8000/admin/ | Django管理后台 |

---

## 👤 测试账号

系统已自动创建以下测试账号：

| 角色 | 用户名 | 密码 | 权限 |
|------|--------|------|------|
| **超级管理员** | admin | admin123 | 全部权限 |
| **仓库管理员** | manager1 | manager123 | 管理权限 |
| **操作员** | operator1 | operator123 | 操作权限 |

---

## 📊 测试数据

系统已自动生成以下测试数据：

### 供应商（3个）
- 科技配件供应商 (SUP-001)
- 办公用品批发商 (SUP-002)
- 电子设备分销商 (SUP-003)

### 仓库（2个）
- 主仓库 (WH-001) - 容量10000
- 副仓库 (WH-002) - 容量5000

### 类别（6个）
- 电子设备
- 办公用品
- 原材料
- 成品
- 包装材料
- 其他

### 物品（7个）
- 无线鼠标 (WM-200) - 库存150
- 机械键盘 (KB-500) - 库存80
- 27寸显示器 (MN-270) - 库存45
- U盘 128GB (UD-128) - 库存200
- 笔记本电脑包 (BAG-001) - 库存5 ⚠️ 低库存
- HDMI线缆 (HDMI-002) - 库存8 ⚠️ 低库存
- 移动电源 (PB-001) - 库存12 ⚠️ 低库存

---

## 🔧 数据库管理

### 查看数据

```bash
# 进入Django Shell
python manage.py shell

# 查询示例
from apps.inventory.models import Item
items = Item.objects.all()
for item in items:
    print(f"{item.name}: {item.stock}")
```

### 重置数据库

```bash
# 删除数据库文件
del db.sqlite3

# 重新迁移
python manage.py migrate

# 重新生成测试数据
python setup_database.py
```

### 添加更多测试数据

编辑 `setup_database.py` 文件，在相应函数中添加数据。

---

## 📱 前端功能说明

### 已实现的页面

1. **仪表盘** - 库存概览和统计
2. **库存物品** - 物品列表和管理
3. **入库管理** - 入库记录和操作
4. **出库管理** - 出库记录和操作
5. **库存调拨** - 仓库间调拨
6. **仓库管理** - 仓库信息管理
7. **供应商** - 供应商信息管理
8. **报表分析** - 数据分析和报表
9. **系统设置** - 系统配置

### 前端特性

- ✅ 响应式设计（支持手机/平板/电脑）
- ✅ Apple风格UI设计
- ✅ TailwindCSS样式
- ✅ ECharts图表
- ✅ 模态框交互
- ✅ 侧边栏折叠

---

## 🔌 API使用示例

### 1. 用户登录

```bash
curl -X POST http://localhost:8000/api/auth/login/ \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "admin123"
  }'
```

**响应：**
```json
{
  "success": true,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "username": "admin",
      "email": "admin@example.com",
      "role": "admin"
    }
  }
}
```

### 2. 获取用户信息

```bash
curl -X GET http://localhost:8000/api/auth/profile/ \
  -H "Authorization: Bearer YOUR_TOKEN"
```

### 3. 查看Swagger文档

访问 http://localhost:8000/swagger/ 可以：
- 查看所有API接口
- 在线测试API
- 查看请求/响应格式

---

## 🐳 Docker部署

### 启动所有服务

```bash
docker-compose up -d
```

包含服务：
- PostgreSQL数据库
- Redis缓存
- Django应用
- Nginx反向代理

### 查看日志

```bash
docker-compose logs -f web
```

### 进入容器

```bash
# 进入Django容器
docker-compose exec web bash

# 执行迁移
docker-compose exec web python manage.py migrate

# 创建超级用户
docker-compose exec web python manage.py createsuperuser
```

### 停止服务

```bash
docker-compose down
```

---

## 🛠️ 开发指南

### 项目结构

```
库存管理系统/
├── apps/                    # 应用模块
│   ├── authentication/      # ✅ 用户认证（已完成）
│   ├── inventory/           # ✅ 库存管理（模型已完成）
│   ├── operations/          # ✅ 出入库（模型已完成）
│   ├── dashboard/           # ⚠️ 仪表盘（待实现）
│   ├── suppliers/           # ✅ 供应商（模型已完成）
│   ├── warehouses/          # ✅ 仓库（模型已完成）
│   └── reports/             # ⚠️ 报表（待实现）
├── common/                  # ✅ 公共模块
├── config/                  # ✅ Django配置
├── static/                  # 静态文件
├── media/                   # 媒体文件
└── templates/               # ✅ 前端模板
```

### 下一步开发

需要实现的API接口（参考 `后端开发文档.md`）：

1. **库存管理API**
   - 物品列表/详情/创建/更新/删除
   - 图片上传
   - 低库存查询

2. **出入库API**
   - 入库操作
   - 出库操作
   - 库存调拨
   - 操作历史

3. **仪表盘API**
   - 统计数据
   - 库存趋势
   - 类别分布
   - 最近活动

4. **其他API**
   - 供应商管理
   - 仓库管理
   - 报表生成

---

## 📚 参考文档

- [快速开始.md](./快速开始.md) - 快速启动指南
- [API文档.md](./API文档.md) - API接口规范
- [后端开发文档.md](./后端开发文档.md) - 详细开发指南
- [README.md](./README.md) - 项目说明

---

## ❓ 常见问题

### 1. 如何重置密码？

```bash
python manage.py changepassword admin
```

### 2. 如何添加新物品？

- 方式一：访问 http://localhost:8000/admin/ 使用管理后台
- 方式二：使用API接口（需要先实现）
- 方式三：在Django Shell中添加

### 3. 如何查看所有物品？

```bash
python manage.py shell

from apps.inventory.models import Item
items = Item.objects.all()
for item in items:
    print(f"{item.code}: {item.name} - 库存{item.stock}")
```

### 4. 如何清空数据？

```bash
# 删除所有物品
python manage.py shell
from apps.inventory.models import Item
Item.objects.all().delete()

# 或重置整个数据库
del db.sqlite3
python manage.py migrate
python setup_database.py
```

### 5. 端口被占用怎么办？

```bash
# 使用其他端口
python manage.py runserver 8080
```

---

## 🎯 下一步计划

1. ✅ 完成数据模型定义
2. ⚠️ 实现API序列化器和视图
3. ⚠️ 前后端数据对接
4. ⚠️ 实现仪表盘统计
5. ⚠️ 添加单元测试
6. ⚠️ 性能优化
7. ⚠️ Flutter移动端开发

---

## 💡 提示

1. 开发环境使用SQLite，无需额外配置
2. 所有密码都是测试密码，生产环境请修改
3. 查看Swagger文档了解API详情
4. 使用Django Admin快速管理数据
5. 参考 `后端开发文档.md` 实现API

---

## 🎉 开始使用

现在你可以：

1. ✅ 运行 `start.bat` 启动系统
2. ✅ 访问 http://localhost:8000/ 查看界面
3. ✅ 访问 http://localhost:8000/admin/ 管理数据
4. ✅ 访问 http://localhost:8000/swagger/ 查看API
5. ⚠️ 开始实现API接口

祝使用愉快！🚀
