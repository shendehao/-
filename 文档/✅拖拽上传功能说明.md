# âœ… æ‹–æ‹½ä¸Šä¼ åŠŸèƒ½è¯´æ˜

## ğŸ¯ å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ–‡ä»¶æ‹–æ‹½ä¸Šä¼ 
- âœ… æ”¯æŒæ‹–æ‹½å›¾ç‰‡æ–‡ä»¶åˆ°ä¸Šä¼ åŒºåŸŸ
- âœ… æ‹–æ‹½æ—¶é«˜äº®æ˜¾ç¤ºä¸Šä¼ åŒºåŸŸ
- âœ… è‡ªåŠ¨éªŒè¯æ–‡ä»¶ç±»å‹å’Œå¤§å°
- âœ… å®æ—¶å›¾ç‰‡é¢„è§ˆ
- âœ… å¯åˆ é™¤å·²ä¸Šä¼ çš„å›¾ç‰‡

### 2. ç‚¹å‡»ä¸Šä¼ 
- âœ… ç‚¹å‡»ä¸Šä¼ åŒºåŸŸæ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨
- âœ… æ”¯æŒé€‰æ‹© JPGã€PNG æ ¼å¼å›¾ç‰‡
- âœ… æœ€å¤§æ–‡ä»¶å¤§å° 5MB

### 3. è¡¨å•å®Œæ•´æ€§
- âœ… æ‰€æœ‰å­—æ®µéƒ½æœ‰ name å’Œ id å±æ€§
- âœ… å¿…å¡«å­—æ®µæ ‡è®°ä¸º required
- âœ… è¡¨å•å¯ä»¥æ­£ç¡®æäº¤åˆ°åç«¯

### 4. ç”¨æˆ·ä½“éªŒ
- âœ… æ‹–æ‹½æ—¶è§†è§‰åé¦ˆï¼ˆè¾¹æ¡†å˜è“ï¼‰
- âœ… ä¸Šä¼ æˆåŠŸ/å¤±è´¥é€šçŸ¥
- âœ… å›¾ç‰‡é¢„è§ˆå¸¦åˆ é™¤æŒ‰é’®
- âœ… æ˜¾ç¤ºæ–‡ä»¶åå’Œå¤§å°

## ğŸ“‹ è¡¨å•å­—æ®µåˆ—è¡¨

| å­—æ®µå | nameå±æ€§ | idå±æ€§ | ç±»å‹ | å¿…å¡« |
|--------|----------|--------|------|------|
| ç‰©å“åç§° | name | item-name | text | âœ… |
| ç‰©å“ç¼–ç  | code | item-code | text | âœ… |
| ç‰©å“ç±»åˆ« | category | item-category | select | âœ… |
| ä¾›åº”å•† | supplier | item-supplier | select | âŒ |
| å•ä»· | price | item-price | number | âœ… |
| åº“å­˜æ•°é‡ | stock | item-stock | number | âœ… |
| æœ€ä½åº“å­˜ | min_stock | item-min-stock | number | âŒ |
| ä»“åº“ä½ç½® | warehouse_location | item-warehouse | text | âŒ |
| ç‰©å“æè¿° | description | item-description | textarea | âŒ |
| ç‰©å“å›¾ç‰‡ | image | item-image-input | file | âŒ |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šæ‹–æ‹½ä¸Šä¼ 

1. æ‰“å¼€"æ·»åŠ ç‰©å“"æ¨¡æ€æ¡†
2. æ‰¾åˆ°å›¾ç‰‡ä¸Šä¼ åŒºåŸŸï¼ˆè™šçº¿æ¡†ï¼‰
3. ä»æ¡Œé¢æˆ–æ–‡ä»¶å¤¹æ‹–æ‹½å›¾ç‰‡æ–‡ä»¶
4. æ”¾åˆ°è™šçº¿æ¡†å†…
5. è‡ªåŠ¨æ˜¾ç¤ºé¢„è§ˆ

### æ–¹æ³•2ï¼šç‚¹å‡»ä¸Šä¼ 

1. æ‰“å¼€"æ·»åŠ ç‰©å“"æ¨¡æ€æ¡†
2. ç‚¹å‡»å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ
3. åœ¨æ–‡ä»¶é€‰æ‹©å™¨ä¸­é€‰æ‹©å›¾ç‰‡
4. ç‚¹å‡»"æ‰“å¼€"
5. è‡ªåŠ¨æ˜¾ç¤ºé¢„è§ˆ

### åˆ é™¤å›¾ç‰‡

ç‚¹å‡»é¢„è§ˆå›¾ç‰‡å³ä¸Šè§’çš„ âŒ æŒ‰é’®å³å¯åˆ é™¤

## ğŸ“ ä»£ç å®ç°

### HTMLç»“æ„

```html
<!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
<input type="file" id="item-image-input" name="image" 
       accept="image/jpeg,image/png,image/jpg" class="hidden" />

<!-- ä¸Šä¼ åŒºåŸŸ -->
<div id="upload-area" class="border-2 border-dashed...">
  <i class="fas fa-cloud-upload-alt"></i>
  <p>ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡æˆ–æ‹–æ”¾æ–‡ä»¶åˆ°æ­¤å¤„</p>
</div>

<!-- é¢„è§ˆåŒºåŸŸ -->
<div id="image-preview" class="hidden">
  <img id="preview-img" src="" />
  <button id="remove-image">Ã—</button>
  <p id="image-name"></p>
</div>
```

### JavaScriptåŠŸèƒ½

```javascript
// 1. ç‚¹å‡»ä¸Šä¼ 
uploadArea.addEventListener('click', () => fileInput.click());

// 2. æ‹–æ‹½è¿›å…¥
uploadArea.addEventListener('dragover', (e) => {
  e.preventDefault();
  uploadArea.classList.add('border-primary');
});

// 3. æ”¾ç½®æ–‡ä»¶
uploadArea.addEventListener('drop', (e) => {
  e.preventDefault();
  const file = e.dataTransfer.files[0];
  handleFile(file);
});

// 4. å¤„ç†æ–‡ä»¶
function handleFile(file) {
  // éªŒè¯ç±»å‹
  if (!ALLOWED_TYPES.includes(file.type)) {
    showNotification('error', 'åªæ”¯æŒ JPG å’Œ PNG æ ¼å¼');
    return;
  }
  
  // éªŒè¯å¤§å°
  if (file.size > MAX_FILE_SIZE) {
    showNotification('error', 'å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MB');
    return;
  }
  
  // é¢„è§ˆå›¾ç‰‡
  const reader = new FileReader();
  reader.onload = (e) => {
    previewImg.src = e.target.result;
    uploadArea.classList.add('hidden');
    imagePreview.classList.remove('hidden');
  };
  reader.readAsDataURL(file);
}
```

## ğŸ¨ è§†è§‰æ•ˆæœ

### é»˜è®¤çŠ¶æ€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚
â”‚    â˜ï¸ äº‘ä¸Šä¼ å›¾æ ‡             â”‚
â”‚                             â”‚
â”‚  ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡æˆ–æ‹–æ”¾æ–‡ä»¶åˆ°æ­¤å¤„  â”‚
â”‚  æ”¯æŒ JPG, PNG æ ¼å¼ï¼Œæœ€å¤§ 5MB â”‚
â”‚                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ‹–æ‹½æ—¶ï¼ˆé«˜äº®ï¼‰
```
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â” â† è“è‰²è¾¹æ¡†
â•‘                             â•‘
â•‘    â˜ï¸ äº‘ä¸Šä¼ å›¾æ ‡             â•‘
â•‘                             â•‘
â•‘  ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡æˆ–æ‹–æ”¾æ–‡ä»¶åˆ°æ­¤å¤„  â•‘
â•‘  æ”¯æŒ JPG, PNG æ ¼å¼ï¼Œæœ€å¤§ 5MB â•‘
â•‘                             â•‘
â””â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”˜
```

### ä¸Šä¼ åï¼ˆé¢„è§ˆï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”
â”‚       â”‚ âŒ â† åˆ é™¤æŒ‰é’®
â”‚ å›¾ç‰‡  â”‚
â”‚ é¢„è§ˆ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜
image.jpg (245 KB)
```

## âš™ï¸ é…ç½®é¡¹

### æ–‡ä»¶ç±»å‹é™åˆ¶

```javascript
const ALLOWED_TYPES = ['image/jpeg', 'image/jpg', 'image/png'];
```

å¯ä»¥æ·»åŠ æ›´å¤šç±»å‹ï¼š
```javascript
const ALLOWED_TYPES = [
  'image/jpeg', 
  'image/jpg', 
  'image/png',
  'image/gif',  // æ·»åŠ GIFæ”¯æŒ
  'image/webp'  // æ·»åŠ WebPæ”¯æŒ
];
```

### æ–‡ä»¶å¤§å°é™åˆ¶

```javascript
const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB
```

ä¿®æ”¹ä¸º10MBï¼š
```javascript
const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB
```

## ğŸ”Œ åç«¯é›†æˆ

### è¡¨å•æäº¤

```javascript
const addItemForm = document.getElementById('add-item-form');
addItemForm.addEventListener('submit', async function(e) {
  e.preventDefault();
  
  // åˆ›å»ºFormData
  const formData = new FormData(addItemForm);
  
  // æ·»åŠ å›¾ç‰‡æ–‡ä»¶
  if (selectedFile) {
    formData.append('image', selectedFile);
  }
  
  // å‘é€åˆ°åç«¯
  try {
    const response = await fetch('/api/items/', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`
      },
      body: formData  // ç›´æ¥å‘é€FormData
    });
    
    const data = await response.json();
    if (data.success) {
      showNotification('success', 'ç‰©å“æ·»åŠ æˆåŠŸï¼');
    }
  } catch (error) {
    showNotification('error', 'æ·»åŠ å¤±è´¥ï¼š' + error.message);
  }
});
```

### Djangoåç«¯æ¥æ”¶

```python
# views.py
from django.views.decorators.csrf import csrf_exempt
from django.core.files.storage import default_storage

@csrf_exempt
def add_item(request):
    if request.method == 'POST':
        # è·å–è¡¨å•æ•°æ®
        name = request.POST.get('name')
        code = request.POST.get('code')
        category = request.POST.get('category')
        price = request.POST.get('price')
        stock = request.POST.get('stock')
        
        # è·å–ä¸Šä¼ çš„æ–‡ä»¶
        image = request.FILES.get('image')
        
        if image:
            # ä¿å­˜æ–‡ä»¶
            filename = default_storage.save(
                f'items/{image.name}', 
                image
            )
            image_url = default_storage.url(filename)
        
        # åˆ›å»ºç‰©å“
        item = Item.objects.create(
            name=name,
            code=code,
            category=category,
            price=price,
            stock=stock,
            image=image_url if image else None
        )
        
        return JsonResponse({
            'success': True,
            'data': {
                'id': item.id,
                'name': item.name,
                'image': item.image
            }
        })
```

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. æµ‹è¯•æ‹–æ‹½ä¸Šä¼ 

1. æ‰“å¼€é¡µé¢ï¼š`http://localhost:8080/templates/index.html`
2. ç‚¹å‡»"æ·»åŠ ç‰©å“"æŒ‰é’®
3. ä»æ¡Œé¢æ‹–æ‹½ä¸€å¼ å›¾ç‰‡åˆ°è™šçº¿æ¡†
4. æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºé¢„è§ˆ
5. æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### 2. æµ‹è¯•ç‚¹å‡»ä¸Šä¼ 

1. ç‚¹å‡»è™šçº¿æ¡†
2. åœ¨æ–‡ä»¶é€‰æ‹©å™¨ä¸­é€‰æ‹©å›¾ç‰‡
3. æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºé¢„è§ˆ

### 3. æµ‹è¯•æ–‡ä»¶éªŒè¯

**æµ‹è¯•å¤§æ–‡ä»¶ï¼š**
- æ‹–æ‹½ä¸€ä¸ªè¶…è¿‡5MBçš„å›¾ç‰‡
- åº”è¯¥æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MB"

**æµ‹è¯•é”™è¯¯æ ¼å¼ï¼š**
- æ‹–æ‹½ä¸€ä¸ªPDFæˆ–Wordæ–‡ä»¶
- åº”è¯¥æ˜¾ç¤ºé”™è¯¯æç¤ºï¼š"åªæ”¯æŒ JPG å’Œ PNG æ ¼å¼çš„å›¾ç‰‡"

### 4. æµ‹è¯•åˆ é™¤åŠŸèƒ½

1. ä¸Šä¼ ä¸€å¼ å›¾ç‰‡
2. ç‚¹å‡»é¢„è§ˆå›¾å³ä¸Šè§’çš„ âŒ æŒ‰é’®
3. å›¾ç‰‡é¢„è§ˆåº”è¯¥æ¶ˆå¤±
4. ä¸Šä¼ åŒºåŸŸåº”è¯¥é‡æ–°æ˜¾ç¤º

### 5. æµ‹è¯•è¡¨å•æäº¤

1. å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ
2. ä¸Šä¼ ä¸€å¼ å›¾ç‰‡
3. ç‚¹å‡»"ä¿å­˜ç‰©å“"
4. æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰
5. æŸ¥çœ‹è¡¨å•æ•°æ®å’Œæ–‡ä»¶ä¿¡æ¯

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ‹–æ‹½åæ²¡æœ‰ååº”

**åŸå› **: å¯èƒ½æ˜¯JavaScriptæœªåŠ è½½

**è§£å†³**:
1. æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰
2. æŸ¥çœ‹æ˜¯å¦æœ‰JavaScripté”™è¯¯
3. ç¡®è®¤é¡µé¢å®Œå…¨åŠ è½½åå†æ‹–æ‹½

### Q2: å›¾ç‰‡é¢„è§ˆä¸æ˜¾ç¤º

**åŸå› **: æ–‡ä»¶è¯»å–å¤±è´¥

**è§£å†³**:
1. æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æŸå
2. å°è¯•å…¶ä»–å›¾ç‰‡
3. æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### Q3: æç¤ºæ–‡ä»¶å¤ªå¤§

**åŸå› **: æ–‡ä»¶è¶…è¿‡5MBé™åˆ¶

**è§£å†³**:
1. å‹ç¼©å›¾ç‰‡
2. æˆ–ä¿®æ”¹ `MAX_FILE_SIZE` é™åˆ¶

### Q4: ä¸Šä¼ åè¡¨å•æäº¤å¤±è´¥

**åŸå› **: åç«¯æœªæ­£ç¡®æ¥æ”¶æ–‡ä»¶

**è§£å†³**:
1. ç¡®è®¤åç«¯æ”¯æŒ `multipart/form-data`
2. æ£€æŸ¥åç«¯CORSé…ç½®
3. æŸ¥çœ‹Networkæ ‡ç­¾çš„è¯·æ±‚è¯¦æƒ…

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### æŸ¥çœ‹ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯

æ‰“å¼€æ§åˆ¶å°ï¼Œè¾“å…¥ï¼š

```javascript
// æŸ¥çœ‹é€‰ä¸­çš„æ–‡ä»¶
console.log(selectedFile);

// æŸ¥çœ‹æ–‡ä»¶å
console.log(selectedFile.name);

// æŸ¥çœ‹æ–‡ä»¶å¤§å°
console.log(selectedFile.size);

// æŸ¥çœ‹æ–‡ä»¶ç±»å‹
console.log(selectedFile.type);
```

### æ‰‹åŠ¨è§¦å‘ä¸Šä¼ 

```javascript
// æ‰“å¼€æ–‡ä»¶é€‰æ‹©å™¨
document.getElementById('item-image-input').click();
```

### æ¸…ç©ºå·²ä¸Šä¼ çš„æ–‡ä»¶

```javascript
// ç‚¹å‡»åˆ é™¤æŒ‰é’®
document.getElementById('remove-image').click();
```

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–

### å¯é€‰åŠŸèƒ½

- [ ] æ”¯æŒå¤šå›¾ç‰‡ä¸Šä¼ 
- [ ] å›¾ç‰‡è£å‰ªåŠŸèƒ½
- [ ] å›¾ç‰‡å‹ç¼©ï¼ˆå®¢æˆ·ç«¯ï¼‰
- [ ] ä¸Šä¼ è¿›åº¦æ¡
- [ ] æ‹–æ‹½æ’åº
- [ ] å›¾ç‰‡ç¼–è¾‘ï¼ˆæ»¤é•œã€æ—‹è½¬ï¼‰

### æ€§èƒ½ä¼˜åŒ–

- [ ] å¤§å›¾ç‰‡è‡ªåŠ¨å‹ç¼©
- [ ] ç¼©ç•¥å›¾ç”Ÿæˆ
- [ ] æ‡’åŠ è½½é¢„è§ˆ
- [ ] WebPæ ¼å¼æ”¯æŒ

---

**åŠŸèƒ½çŠ¶æ€**: âœ… å·²å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**: â³ å¾…æµ‹è¯•  
**ç‰ˆæœ¬**: v1.0.0  
**æ›´æ–°æ—¶é—´**: 2024-12-06 00:40
